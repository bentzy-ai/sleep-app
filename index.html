<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>חלוקת לינה</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: Arial;
  direction: rtl;
  margin: 0;
  padding: 10px;
}

.container {
  display: flex;
  gap: 10px;
}

@media (max-width: 700px) {
  .container {
    flex-direction: column;
  }
}

.box {
  border: 1px solid #ccc;
  padding: 10px;
  border-radius: 6px;
}

#guests { width: 30%; }
#houses { width: 70%; }

@media (max-width: 700px) {
  #guests, #houses {
    width: 100%;
  }
}

.guest {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 4px 0;
}

.guest.used span {
  text-decoration: line-through;
  color: gray;
}

button {
  margin: 3px;
  padding: 5px 8px;
  cursor: pointer;
}

.house, .room {
  border: 1px solid #000;
  padding: 8px;
  margin: 8px 0;
  border-radius: 6px;
}

.room textarea {
  width: 100%;
  height: 40px;
}
</style>
</head>
<body>

<div class="container">

  <!-- אורחים -->
  <div id="guests" class="box">
    <h3>אורחים</h3>
    <input id="guestInput" placeholder="שם אורח">
    <button onclick="addGuest()">הוסף</button>
    <ol id="guestList"></ol>
  </div>

  <!-- בתים -->
  <div id="houses" class="box">
    <h3>בתים מארחים</h3>
    <button onclick="addHouse()">➕ הוסף בית</button>
    <div id="houseList"></div>
  </div>

</div>

<script>
let guests = [];

function renderGuests() {
  const list = document.getElementById("guestList");
  list.innerHTML = "";
  guests.forEach((g, i) => {
    const li = document.createElement("li");
    li.className = "guest" + (g.used ? " used" : "");
    li.innerHTML = `
      <span>${g.name}</span>
      <button onclick="removeGuest(${i})">❌</button>
    `;
    list.appendChild(li);
  });
}

function addGuest() {
  const name = guestInput.value.trim();
  if (!name) return;
  guests.push({ name, used: false });
  guestInput.value = "";
  renderGuests();
}

function removeGuest(index) {
  guests.splice(index, 1);
  updateGuestUsage();
}

function updateGuestUsage() {
  guests.forEach(g => g.used = false);
  document.querySelectorAll("textarea").forEach(t => {
    guests.forEach(g => {
      if (t.value.includes(g.name)) g.used = true;
    });
  });
  renderGuests();
}

function addHouse() {
  const houseName = prompt("שם הבית:");
  if (!houseName) return;

  const house = document.createElement("div");
  house.className = "house";
  house.innerHTML = `
    <b>${houseName}</b>
    <button onclick="this.parentElement.remove(); updateGuestUsage()">❌ מחק בית</button>
    <br>
    <button onclick="addRoom(this)">➕ הוסף חדר</button>
    <div class="rooms"></div>
  `;
  document.getElementById("houseList").appendChild(house);
}

let roomCounter = 1;

function addRoom(btn) {
  const room = document.createElement("div");
  room.className = "room";

  room.innerHTML = `
    <input 
      value="חדר ${roomCounter++}" 
      style="font-weight:bold; width:70%"
    >
    <button onclick="this.parentElement.remove(); updateGuestUsage()">❌</button>
    <br>
    <textarea 
      oninput="updateGuestUsage()" 
      placeholder="שמות אורחים">
    </textarea>
  `;

  btn.nextElementSibling.appendChild(room);
}


